---
title: "Error Handling"
description: "Understanding error responses and status codes"
---

## Overview

The Inbound API uses conventional HTTP status codes to indicate the success or failure of requests. Error responses include detailed messages to help you debug issues.

## Error Response Structure

All error responses follow a consistent JSON structure:

```json
{
  "error": "Human-readable error message",
  "code": "OPTIONAL_ERROR_CODE",
  "details": "Additional context (optional)"
}
```

<ResponseField name="error" type="string" required>
  Human-readable error message describing what went wrong
</ResponseField>

<ResponseField name="code" type="string">
  Optional machine-readable error code for specific error types
</ResponseField>

<ResponseField name="details" type="string">
  Optional additional context or validation details
</ResponseField>

## HTTP Status Codes

The API uses standard HTTP status codes:

### Success Codes

<ResponseField name="200 OK" type="success">
  Request succeeded. Used for GET, PATCH, and DELETE operations.
</ResponseField>

<ResponseField name="201 Created" type="success">
  Resource successfully created. Used for POST operations.
</ResponseField>

### Client Error Codes

<ResponseField name="400 Bad Request" type="error">
  Invalid request data, missing required fields, or validation errors.
</ResponseField>

<ResponseField name="401 Unauthorized" type="error">
  Missing or invalid authentication credentials.
</ResponseField>

<ResponseField name="403 Forbidden" type="error">
  Authenticated but not authorized to perform the action (e.g., plan limits).
</ResponseField>

<ResponseField name="404 Not Found" type="error">
  Requested resource does not exist or you don't have access to it.
</ResponseField>

<ResponseField name="409 Conflict" type="error">
  Request conflicts with existing resource (e.g., duplicate domain).
</ResponseField>

<ResponseField name="429 Too Many Requests" type="error">
  Rate limit exceeded. See [Rate Limits](/api-reference/rate-limits).
</ResponseField>

### Server Error Codes

<ResponseField name="500 Internal Server Error" type="error">
  Unexpected error on the server. If this persists, contact support.
</ResponseField>

<ResponseField name="503 Service Unavailable" type="error">
  Service temporarily unavailable (e.g., rate limiting service down).
</ResponseField>

## Error Examples

### 400 Bad Request

**Missing Required Field:**

```json
{
  "error": "Domain is required"
}
```

**Invalid Format:**

```json
{
  "error": "Invalid domain format"
}
```

**Validation Error with Details:**

```json
{
  "error": "Invalid email format",
  "details": "The 'from' field must be a valid email address"
}
```

**Invalid Request Body:**

```json
{
  "error": "Invalid request body: expected string for 'scheduled_at'"
}
```

### 401 Unauthorized

**Missing Authentication:**

```http
HTTP/1.1 401 Unauthorized
WWW-Authenticate: Bearer realm="API", charset="UTF-8"
Content-Type: application/json; charset=utf-8
```

```json
{
  "error": "Unauthorized",
  "message": "Authentication required. Provide a valid session cookie or Bearer token.",
  "statusCode": 401
}
```

**Invalid API Key:**

```json
{
  "error": "Unauthorized",
  "message": "Authentication required. Provide a valid session cookie or Bearer token.",
  "statusCode": 401
}
```

### 403 Forbidden

**Plan Limit Reached:**

```json
{
  "error": "Domain limit reached. Please upgrade your plan to add more domains."
}
```

**Sending Limit Exceeded:**

```json
{
  "error": "Daily sending limit exceeded. Upgrade your plan for higher limits."
}
```

### 404 Not Found

**Resource Not Found:**

```json
{
  "error": "Domain not found"
}
```

**Email Address Not Found:**

```json
{
  "error": "Email address not found or you don't have access to it"
}
```

### 409 Conflict

**Duplicate Domain (Own):**

```json
{
  "error": "You have already added this domain to your account"
}
```

**Duplicate Domain (Another User):**

```json
{
  "error": "This domain is already registered on our platform. If you believe this is an error or you need to transfer ownership, please contact our support team.",
  "code": "DOMAIN_ALREADY_REGISTERED"
}
```

**Duplicate Email Address:**

```json
{
  "error": "Email address already exists"
}
```

**Cannot Delete (Has Dependencies):**

```json
{
  "error": "Cannot delete domain. It has 5 associated email addresses. Delete them first."
}
```

### 429 Too Many Requests

```http
HTTP/1.1 429 Too Many Requests
X-RateLimit-Limit: 10
X-RateLimit-Remaining: 0
X-RateLimit-Reset: 1705315201000
Retry-After: 3
Content-Type: application/json; charset=utf-8
```

```json
{
  "error": "Too Many Requests",
  "message": "Rate limit exceeded. Maximum 10 requests per second. Retry after 3 seconds.",
  "statusCode": 429
}
```

### 500 Internal Server Error

**General Server Error:**

```json
{
  "error": "Failed to create domain"
}
```

**AWS Service Error:**

```json
{
  "error": "Failed to send email"
}
```

### 503 Service Unavailable

```http
HTTP/1.1 503 Service Unavailable
Retry-After: 60
Content-Type: application/json; charset=utf-8
```

```json
{
  "error": "Service Unavailable",
  "message": "Rate limiting service is temporarily unavailable. Please try again later.",
  "statusCode": 503
}
```

## Error Codes

Specific error scenarios include machine-readable codes:

| Code | Description |
|------|-------------|
| `DOMAIN_ALREADY_REGISTERED` | Domain is already claimed by another user |
| `VALIDATION_ERROR` | Request failed validation |
| `LIMIT_EXCEEDED` | Account limit reached |

## Handling Errors

### JavaScript/TypeScript

```typescript
try {
  const response = await fetch('https://inbound.new/api/e2/domains', {
    method: 'POST',
    headers: {
      'Authorization': `Bearer ${apiKey}`,
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({ domain: 'example.com' })
  })
  
  if (!response.ok) {
    const error = await response.json()
    
    switch (response.status) {
      case 400:
        console.error('Validation error:', error.error)
        break
      case 401:
        console.error('Authentication failed - check your API key')
        break
      case 403:
        console.error('Forbidden:', error.error)
        break
      case 404:
        console.error('Not found:', error.error)
        break
      case 409:
        if (error.code === 'DOMAIN_ALREADY_REGISTERED') {
          console.error('Domain already registered by another user')
        }
        break
      case 429:
        const retryAfter = response.headers.get('Retry-After')
        console.error(`Rate limited. Retry after ${retryAfter} seconds`)
        break
      case 500:
        console.error('Server error:', error.error)
        break
    }
    
    throw new Error(error.error)
  }
  
  const data = await response.json()
  console.log('Success:', data)
  
} catch (error) {
  console.error('Request failed:', error)
}
```

### Using the SDK

The SDK automatically throws typed errors:

```typescript
import { Inbound } from 'inboundemail'

const inbound = new Inbound(process.env.INBOUND_API_KEY)

try {
  const domain = await inbound.domains.create({
    domain: 'example.com'
  })
  console.log('Domain created:', domain.id)
  
} catch (error) {
  if (error.status === 409) {
    console.error('Domain already exists')
  } else if (error.status === 400) {
    console.error('Invalid domain:', error.message)
  } else {
    console.error('Error:', error.message)
  }
}
```

## Error Logging

The API logs errors server-side for debugging:

```typescript
// Server-side logging (visible in console)
console.log("ðŸ” Checking if domain already exists")
console.log("âŒ Domain already exists for current user:", domain)
console.error("âŒ Error creating domain:", error)
```

Emojis in logs help identify log types:
- ðŸ” Information/debugging
- âœ… Success
- âŒ Errors
- âš ï¸ Warnings
- ðŸ“Š Metrics/stats

## Best Practices

### 1. Always Check Status Codes

```typescript
if (!response.ok) {
  const error = await response.json()
  throw new Error(`API error: ${error.error}`)
}
```

### 2. Handle Specific Error Codes

```typescript
if (error.code === 'DOMAIN_ALREADY_REGISTERED') {
  // Show specific UI for domain conflicts
} else if (response.status === 403) {
  // Prompt user to upgrade plan
}
```

### 3. Implement Retry Logic

```typescript
async function withRetry(fn: () => Promise<any>, maxRetries = 3) {
  for (let i = 0; i < maxRetries; i++) {
    try {
      return await fn()
    } catch (error) {
      if (error.status === 429 || error.status >= 500) {
        await new Promise(resolve => 
          setTimeout(resolve, Math.pow(2, i) * 1000)
        )
        continue
      }
      throw error // Don't retry client errors
    }
  }
}
```

### 4. Log Errors for Debugging

```typescript
catch (error) {
  console.error('API Error:', {
    status: error.status,
    message: error.message,
    code: error.code,
    timestamp: new Date().toISOString()
  })
  
  // Report to error tracking service
  Sentry.captureException(error)
}
```

## RFC Compliance

Inbound's error handling follows:

- **RFC 7807**: Problem Details for HTTP APIs (error format)
- **RFC 7231**: Standard HTTP status code semantics
- **RFC 7235**: WWW-Authenticate header for 401 responses
- **RFC 6585**: 429 status code and Retry-After header
